var namespace=namespace||{};namespace.logger=function(e){"use strict";var r=e.loggerConfig.getCurrentConfig(),n={},o=e.loggerConfig.LOG_LEVELS,t=function(e){var n="string"==typeof e?o[e.toUpperCase()]:e,t=o[r.level.toUpperCase()];return t!==o.OFF&&(void 0!==n&&n<=t)},a=function(e){if(r.enableServer){var n=r.retryAttemptInitial||0,o=r.retryCount||1,t=function(){try{var a=r.serverProcessName||"JS_LOGGER",s=r.defaultModuleName||"JS_LOGGER",l=r.retryDelayBase||1e3;apex.server.process(a,{x01:e.level,x02:e.text,x03:e.module||s,x04:JSON.stringify(e.extra||{}),x05:e.timestamp,x06:e.user,x07:e.page,x08:e.session},{success:function(){r._serverError=!1},error:function(){++n<=o?setTimeout(t,l*n):(r._serverError=!0,console.warn("Logger server failed, using console fallback"),console.log(i(e)))}})}catch(n){r._serverError=!0,console.error("Logger server error:",n.message),console.log(i(e))}};t()}},s=function(r){var n=new Date(r.timestamp).toLocaleTimeString(),o=r.level.toUpperCase(),t=r.module?`[${r.module}]`:"",a=e.loggerConfig.getConsoleConfig().levelStyles,s=[`%c[${n}] ${o}%c ${t} ${r.text}`,a[o]||a.INFORMATION,"color: inherit"];switch(r.extra&&s.push(r.extra),o){case"ERROR":console.error.apply(console,s);break;case"WARNING":console.warn.apply(console,s);break;default:console.log.apply(console,s)}},i=function(e){var r=new Date(e.timestamp).toLocaleTimeString(),n=e.level.toUpperCase(),o=e.module?`[${e.module}]`:"",t=e.extra?` ${JSON.stringify(e.extra)}`:"";return`[${r}] ${n} ${o} ${e.text}${t}`},l=function(e){if(!e)return e;try{JSON.stringify(e);var n=JSON.stringify(e);return n.length>r.maxDataSize?{_truncated:!0,_originalSize:n.length,data:n.substring(0,r.maxDataSize)+"..."}:c(e)}catch(n){var o=r.maxErrorStringLength||100;return{_error:"Could not serialize data",_type:typeof e,_string:String(e).substring(0,o)}}},c=function(e){if(!r.enableDataMasking||!e||"object"!=typeof e)return e;var n=r.sensitiveFields||["password","token","ssn"],o={};for(var t in e)if(e.hasOwnProperty(t)){var a=t.toLowerCase(),s=n.some((function(e){return a.includes(e)}));o[t]=s?"***MASKED***":e[t]}return o},g=function(e,n,o,t){var a=r.defaultUserName||"UNKNOWN";return{timestamp:(new Date).toISOString(),level:t||"INFORMATION",text:e,module:n,extra:l(o),user:"undefined"!=typeof apex&&apex.env&&apex.env.APP_USER||a,page:"undefined"!=typeof apex&&apex.env&&apex.env.APP_PAGE_ID||0,session:"undefined"!=typeof apex&&apex.env&&apex.env.APP_SESSION||0}},u=function(e,n,o,i){try{var l=!0===(i||{}).sendToServer,c=g(e,n,o,"INFORMATION");t(c.level)&&s(c),l&&r.enableServer&&a(c)}catch(r){"undefined"!=typeof console&&(console.error("Logger error:",r.message),console.log("Original message:",e))}},f=function(e,n,o){try{var i=g(e,n,o,"INFORMATION");r.enableServer&&a(i),t(i.level)&&s(i)}catch(r){"undefined"!=typeof console&&(console.error("Logger server error:",r.message),console.log("Original message:",e))}},v=function(e,n,o,i){try{var l=!0===(i||{}).sendToServer,c=g(e,n,o,"ERROR");t(c.level)&&s(c),l&&r.enableServer&&a(c)}catch(r){"undefined"!=typeof console&&(console.error("Logger error:",r.message),console.log("Original message:",e))}},p=function(e,n,o,i){try{var l=!0===(i||{}).sendToServer,c=g(e,n,o,"WARNING");t(c.level)&&s(c),l&&r.enableServer&&a(c)}catch(r){"undefined"!=typeof console&&(console.error("Logger error:",r.message),console.log("Original message:",e))}},m=function(e){n[e]=performance.now()},d=function(e,o){if(!n[e])return console.warn(`Timing unit '${e}' was not started`),0;var t=performance.now()-n[e],a=r.timingDecimalPlaces||2,s=`${e} completed in ${t.toFixed(a)}ms`;return u(s,o,{unit:e,elapsed:t}),delete n[e],t};return{log:u,error:v,warning:p,logServer:f,timeStart:m,timeStop:d,createModuleLogger:function(e){var r={};return{setExtra:function(e){r=e||{}},clearExtra:function(){r={}},getExtra:function(){return Object.assign({},r)},log:function(n,o,t){var a=Object.assign({},r,o||{});u(n,e,a,t)},error:function(n,o,t){var a=Object.assign({},r,o||{});v(n,e,a,t)},warning:function(n,o,t){var a=Object.assign({},r,o||{});p(n,e,a,t)},logServer:function(n,o){var t=Object.assign({},r,o||{});f(n,e,t)},timeStart:function(e){m(e)},timeStop:function(r){return d(r,e)}}}}}(namespace);